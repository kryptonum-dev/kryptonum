---
import { LANGUAGES, type Language } from '@repo/shared/languages'
import BlogPage, { fetchData } from '@templates/blog/index.astro'

const lang = Astro.params.lang as Language
const data = await fetchData(lang, null, 1)
if (!LANGUAGES.includes(lang) || !data) return Astro.rewrite('/404')

export async function getStaticPaths() {
  return LANGUAGES.map((lang) => ({ params: { lang } }))
}
---

<BlogPage {...data} currentPage={1} currentCategory={null} />
